{"remainingRequest":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\person_data\\demo\\Vue-demo\\sell\\src\\components\\shopcart\\shopcart.vue?vue&type=script&lang=js&","dependencies":[{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\src\\components\\shopcart\\shopcart.vue","mtime":1556111989414},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport cartcontrol from '../cartcontrol/cartcontrol.vue'\r\nimport Scroll from 'better-scroll'\r\n\r\nexport default {\r\n  props: {\r\n    seller: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    selectfoods: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      showshoplist: false,\r\n      balls: [\r\n        {\r\n          show: false\r\n        },\r\n        {\r\n          show: false\r\n        },\r\n        {\r\n          show: false\r\n        },\r\n        {\r\n          show: false\r\n        },\r\n        {\r\n          show: false\r\n        },\r\n        {\r\n          show: false\r\n        },\r\n        {\r\n          show: false\r\n        },{\r\n          show: false\r\n        }\r\n      ],\r\n      dropballs: []\r\n    }\r\n  },\r\n  mounted: function () {\r\n    new Scroll(this.$refs.shopcartContent, {\r\n      click: true\r\n    })\r\n  },\r\n  computed: {\r\n    totalprice: function () {\r\n      let price = 0\r\n      this.selectfoods.forEach((food) => {\r\n        price += food.price * food.count\r\n      })\r\n      return price\r\n    },\r\n    foodcount: function () {\r\n      let count = 0\r\n      this.selectfoods.forEach((food) => {\r\n        count += food.count\r\n      })\r\n      return count\r\n    }\r\n  },\r\n  methods: {\r\n    showlist: function () {\r\n      if (!this.selectfoods.length) {\r\n        return\r\n      }\r\n      this.showshoplist = !this.showshoplist\r\n    },\r\n    dropball: function (el) {\r\n      //currentTarget,绑定事件的节点; target, 触发事件的节点。currentTarget会在冒泡结束后reset为null，所以先保存起来\r\n      const currentTarget = el.currentTarget\r\n      //优化性能体验，异步调用下落动画\r\n      this.$nextTick(() => {\r\n        const length = this.balls.length\r\n        for (let i = 0; i < length; i++) {\r\n          const ball = this.balls[i]\r\n          if (!ball.show) {\r\n            ball.show = true\r\n            ball.el = currentTarget\r\n            this.dropballs.push(ball)\r\n            return\r\n          }\r\n        }\r\n      })\r\n    },\r\n    beforeEnter: function (el) {\r\n      let length = this.dropballs.length\r\n      length--\r\n      const dropball = this.dropballs[length]\r\n      const rect = dropball.el.getBoundingClientRect()\r\n      const height = window.innerHeight\r\n      const x = rect.left - 32\r\n      const y = -(height - rect.top - 38)\r\n      el.style.display = \"\"\r\n      el.style.transform = `translate3d(${x}px, 0, 0)`\r\n      const inner = el.children[0]\r\n      inner.style.transform = `translate3d(0, ${y}px, 0)`\r\n      el.style.transition = \"all 0.4s linear\"\r\n      inner.style.transition = \"all 0.4s cubic-bezier(.64,-0.38,.83,.67)\"\r\n    },\r\n    //当只用 JavaScript 过渡的时候，在 enter 和 leave 中必须使用 done 进行回调。否则，它们将被同步调用，过渡会立即完成。\r\n    enter: function (el) {\r\n      /* eslint-disable no-unused-vars */\r\n      let rf = el.offsetHeight\r\n      const inner = el.children[0]\r\n      el.style.transform = \"translate3d(0, 0, 0)\"\r\n      inner.style.transform = \"translate3d(0, 0, 0)\"\r\n    },\r\n    afterEnter: function (el) {\r\n      const ball = this.dropballs.shift()\r\n      ball.show = false\r\n      el.style.display = \"none\"\r\n    },\r\n    emptylist: function () {\r\n      const length = this.selectfoods.length\r\n      for (let i = length - 1; i >= 0; i--) {\r\n        this.selectfoods[i].count = 0\r\n        this.selectfoods.splice(i, 1)\r\n      }\r\n    },\r\n    pay: function () {\r\n      if (this.totalprice < this.seller.minPrice) {\r\n        return\r\n      }\r\n      alert(`支付${this.totalprice}元`)\r\n      this.emptylist()\r\n    }\r\n  },\r\n  watch: {\r\n    selectfoods: function (newfoods) {\r\n      if (!newfoods.length) {\r\n        this.showshoplist = false\r\n      }\r\n    }\r\n  },\r\n  components: {\r\n    cartcontrol\r\n  }\r\n}\r\n",null]}