{"remainingRequest":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\person_data\\demo\\Vue-demo\\sell\\src\\components\\shopcart\\shopcart.vue?vue&type=style&index=0&id=f754aae2&lang=stylus&scoped=true&","dependencies":[{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\src\\components\\shopcart\\shopcart.vue","mtime":1556111945773},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\stylus-loader\\index.js","mtime":1519606876000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n@import '../../common/stylus/mixin.styl'\r\n\r\n  .shopcart\r\n    position: fixed\r\n    left: 0\r\n    bottom: 0\r\n    display: flex\r\n    width: 100%\r\n    height: 48px\r\n    z-index: 10\r\n    background: #141d27\r\n    .content-left\r\n      flex: 1 1 auto\r\n      font-size: 0\r\n      .logo-wrapper\r\n        display: inline-block\r\n        position: relative\r\n        top: -10px\r\n        margin: 0 11px\r\n        padding: 6px 7px\r\n        width: 56px\r\n        height: 56px\r\n        border-radius: 50%\r\n        background: #141d27\r\n        box-sizing: border-box\r\n        .logo\r\n          display: inline-block\r\n          width: 44px\r\n          height: 44px\r\n          border-radius: 50%\r\n          text-align: center\r\n          background: #2b343c\r\n          cursor: pointer\r\n          &.highlight\r\n            background: #00a0dc\r\n          .icon-shopping_cart\r\n            line-height: 44px\r\n            font-size: 24px\r\n            color: #80858a\r\n            &.highlight\r\n              color: #fff\r\n        .foodcount\r\n          position: absolute\r\n          top: 0\r\n          right: 0\r\n          width: 24px\r\n          height: 16px\r\n          line-height: 16px\r\n          text-align: center\r\n          border-radius: 8px\r\n          font-size: 9px\r\n          color: #fff\r\n          background: #f01414\r\n      .ball-container\r\n        .ball\r\n          position: fixed\r\n          bottom: 22px\r\n          left: 32px\r\n          z-index: 100\r\n          .inner\r\n            width: 16px\r\n            height: 16px\r\n            border-radius: 50%\r\n            background: rgb(0, 160, 220)\r\n      .price\r\n        display: inline-block\r\n        vertical-align: top\r\n        margin-top: 12px\r\n        padding-right: 12px\r\n        box-sizing: border-box\r\n        border-right: 1px solid rgba(255, 255, 255, 0.1)\r\n        font-size: 16px\r\n        line-height: 24px\r\n        font-weight: 700\r\n        color: rgba(255, 255, 255, 0.4)\r\n        &.highlight\r\n          color: #fff\r\n      .desc\r\n        display: inline-block\r\n        vertical-align: top\r\n        margin: 12px 0 0 12px\r\n        line-height: 24px\r\n        font-size: 10px\r\n        color: rgba(255, 255, 255, 0.4)\r\n    .content-right\r\n      flex: 0 0 105px\r\n      box-sizing: border-box\r\n      width: 105px\r\n      text-align: center\r\n      background: #2b333b\r\n      .pay\r\n        height: 48px\r\n        line-height: 48px\r\n        font-size: 12px\r\n        color: rgba(255, 255, 255, 0.4)\r\n        font-weight: 700\r\n      .topay\r\n        height: 48px\r\n        line-height: 48px\r\n        font-size: 12px\r\n        color: #fff\r\n        background: #00b43c\r\n        cursor: pointer\r\n    .shoplist\r\n      position: absolute\r\n      top: 0\r\n      left: 0\r\n      transform: translate3d(0, -100%, 0)\r\n      width: 100%\r\n      background: #fff\r\n      color: #fff\r\n      z-index: -9\r\n      &.fold-enter-active, &.fold-leave-active\r\n        transition: all 0.3s linear\r\n      &.fold-enter, &.fold-leave-to\r\n        transform: translate3d(0, 0, 0)\r\n      .list-header\r\n        padding: 0 18px\r\n        height: 40px\r\n        line-height: 40px\r\n        background: #f3f5f7\r\n        border-bottom: 1px solid rgba(7, 17, 27, 0.1)\r\n        overflow: hidden\r\n        .shopcart-title\r\n          float: left\r\n          font-size: 14px\r\n          color: rgb(7, 17, 27)\r\n        .empty\r\n          float: right\r\n          font-size: 12px\r\n          color: rgb(0, 160, 220)\r\n          cursor: pointer\r\n      .shopcart-content\r\n        max-height: 215px\r\n        overflow: hidden\r\n        .content-list\r\n          padding: 0 18px\r\n          .content-item\r\n            height: 48px\r\n            line-height: 48px\r\n            border-1px(rgba(7, 17, 27, 0.1))\r\n            .food-name\r\n              font-size: 14px\r\n              font-weight: 500\r\n              color: rgb(7, 17, 27)\r\n            .food-price\r\n              float: right\r\n              margin-right: 6px\r\n              font-size: 14px\r\n              font-weight: 700\r\n              color: rgb(240, 20, 20)\r\n            .select\r\n              float: right\r\n              margin-top: 12px\r\n    .list-mask\r\n      position: fixed\r\n      top: 0\r\n      left: 0\r\n      width: 100%\r\n      height: 100%\r\n      background: rgba(7, 17, 27, 0.6)\r\n      backdrop-filter: blur(10px)\r\n      z-index: -10\r\n      &.mask-enter-active, &.mask-leave-active\r\n        transition: all 0.5s linear\r\n      &.mask-enter, &.mask-leave-to\r\n        opacity: 0\r\n",{"version":3,"sources":["shopcart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqMA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"shopcart.vue","sourceRoot":"src/components/shopcart","sourcesContent":["<template>\r\n  <div class=\"shopcart\">\r\n    <div class=\"content-left\" v-on:click=\"showlist\">\r\n      <div class=\"logo-wrapper\">\r\n        <div class=\"logo\" v-bind:class=\"{ 'highlight': foodcount > 0 }\">\r\n          <i id=\"shop-icon\" class=\"icon-shopping_cart\" v-bind:class=\"{ 'highlight': foodcount > 0 }\"></i>\r\n        </div>\r\n        <div class=\"ball-container\">\r\n          <transition v-for=\"(ball, index) of balls\" v-bind:key=\"index\" v-on:before-enter=\"beforeEnter\" v-on:enter=\"enter\" v-on:after-enter=\"afterEnter\">\r\n            <div v-show=\"ball.show\" class=\"ball\">\r\n              <div class=\"inner\"></div>\r\n            </div>\r\n          </transition>\r\n        </div>\r\n        <div v-show=\"foodcount\" class=\"foodcount\">{{foodcount}}</div>\r\n      </div>\r\n      <div class=\"price\" v-bind:class=\"{ 'highlight': foodcount > 0 }\">￥{{totalprice}}</div>\r\n      <div class=\"desc\">另需配送费￥{{seller.deliveryPrice}}元</div>\r\n    </div>\r\n    <div class=\"content-right\" v-on:click=\"pay\">\r\n      <div v-if=\"!foodcount\" class=\"pay\">￥{{seller.minPrice}}起送</div>\r\n      <div v-else-if=\"totalprice < seller.minPrice\" class=\"pay\">还差￥{{seller.minPrice - totalprice}}起送</div>\r\n      <div v-else-if=\"totalprice >= seller.minPrice\" class=\"topay\">结算</div>\r\n    </div>\r\n    <transition name=\"fold\">\r\n      <div v-show=\"showshoplist\" class=\"shoplist\">\r\n        <div class=\"list-header\">\r\n          <h1 class=\"shopcart-title\">购物车</h1>\r\n          <span class=\"empty\" v-on:click=\"emptylist\">清空</span>\r\n        </div>\r\n        <div class=\"shopcart-content\" ref=\"shopcartContent\">\r\n          <ul class=\"content-list\">\r\n            <li v-for=\"selectfood of selectfoods\" v-bind:key=\"selectfood.name\" class=\"content-item border-1px\">\r\n              <span class=\"food-name\">{{selectfood.name}}</span>\r\n              <cartcontrol v-bind:food=\"selectfood\" v-bind:selectfoods=\"selectfoods\" v-on:drop=\"dropball\" class=\"select\"></cartcontrol>\r\n              <span class=\"food-price\">￥{{selectfood.price * selectfood.count}}</span>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </transition>\r\n    <transition name=\"mask\">\r\n      <div v-show=\"showshoplist\" v-on:click=\"showlist\" class=\"list-mask\"></div>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cartcontrol from '../cartcontrol/cartcontrol.vue'\r\nimport Scroll from 'better-scroll'\r\n\r\nexport default {\r\n  props: {\r\n    seller: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    selectfoods: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      showshoplist: false,\r\n      balls: [\r\n        {\r\n          show: false\r\n        },\r\n        {\r\n          show: false\r\n        },\r\n        {\r\n          show: false\r\n        },\r\n        {\r\n          show: false\r\n        },\r\n        {\r\n          show: false\r\n        },\r\n        {\r\n          show: false\r\n        },\r\n        {\r\n          show: false\r\n        },{\r\n          show: false\r\n        }\r\n      ],\r\n      dropballs: []\r\n    }\r\n  },\r\n  mounted: function () {\r\n    new Scroll(this.$refs.shopcartContent, {\r\n      click: true\r\n    })\r\n  },\r\n  computed: {\r\n    totalprice: function () {\r\n      let price = 0\r\n      this.selectfoods.forEach((food) => {\r\n        price += food.price * food.count\r\n      })\r\n      return price\r\n    },\r\n    foodcount: function () {\r\n      let count = 0\r\n      this.selectfoods.forEach((food) => {\r\n        count += food.count\r\n      })\r\n      return count\r\n    }\r\n  },\r\n  methods: {\r\n    showlist: function () {\r\n      if (!this.selectfoods.length) {\r\n        return\r\n      }\r\n      this.showshoplist = !this.showshoplist\r\n    },\r\n    dropball: function (el) {\r\n      //currentTarget,绑定事件的节点; target, 触发事件的节点。currentTarget会在冒泡结束后reset为null，所以先保存起来\r\n      const currentTarget = el.currentTarget\r\n      //优化性能体验，异步调用下落动画\r\n      this.$nextTick(() => {\r\n        const length = this.balls.length\r\n        for (let i = 0; i < length; i++) {\r\n          const ball = this.balls[i]\r\n          if (!ball.show) {\r\n            ball.show = true\r\n            ball.el = currentTarget\r\n            this.dropballs.push(ball)\r\n            return\r\n          }\r\n        }\r\n      })\r\n    },\r\n    beforeEnter: function (el) {\r\n      let length = this.dropballs.length\r\n      length--\r\n      const dropball = this.dropballs[length]\r\n      const rect = dropball.el.getBoundingClientRect()\r\n      const height = window.innerHeight\r\n      const x = rect.left - 32\r\n      const y = -(height - rect.top - 38)\r\n      el.style.display = \"\"\r\n      el.style.transform = `translate3d(${x}px, 0, 0)`\r\n      const inner = el.children[0]\r\n      inner.style.transform = `translate3d(0, ${y}px, 0)`\r\n      el.style.transition = \"all 0.4s linear\"\r\n      inner.style.transition = \"all 0.4s cubic-bezier(.64,-0.38,.83,.67)\"\r\n    },\r\n    //当只用 JavaScript 过渡的时候，在 enter 和 leave 中必须使用 done 进行回调。否则，它们将被同步调用，过渡会立即完成。\r\n    enter: function (el) {\r\n      /* eslint-disable no-unused-vars */\r\n      let rf = el.offsetHeight\r\n      const inner = el.children[0]\r\n      el.style.transform = \"translate3d(0, 0, 0)\"\r\n      inner.style.transform = \"translate3d(0, 0, 0)\"\r\n    },\r\n    afterEnter: function (el) {\r\n      const ball = this.dropballs.shift()\r\n      ball.show = false\r\n      el.style.display = \"none\"\r\n    },\r\n    emptylist: function () {\r\n      const length = this.selectfoods.length\r\n      for (let i = length - 1; i >= 0; i--) {\r\n        this.selectfoods[i].count = 0\r\n        this.selectfoods.splice(i, 1)\r\n      }\r\n    },\r\n    pay: function () {\r\n      if (this.totalprice < this.seller.minPrice) {\r\n        return\r\n      }\r\n      alert(`支付${this.totalprice}元`)\r\n      this.emptylist()\r\n    }\r\n  },\r\n  watch: {\r\n    selectfoods: function (newfoods) {\r\n      if (!newfoods.length) {\r\n        this.showshoplist = false\r\n      }\r\n    }\r\n  },\r\n  components: {\r\n    cartcontrol\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '../../common/stylus/mixin.styl'\r\n\r\n  .shopcart\r\n    position: fixed\r\n    left: 0\r\n    bottom: 0\r\n    display: flex\r\n    width: 100%\r\n    height: 48px\r\n    z-index: 10\r\n    background: #141d27\r\n    .content-left\r\n      flex: 1 1 auto\r\n      font-size: 0\r\n      .logo-wrapper\r\n        display: inline-block\r\n        position: relative\r\n        top: -10px\r\n        margin: 0 11px\r\n        padding: 6px 7px\r\n        width: 56px\r\n        height: 56px\r\n        border-radius: 50%\r\n        background: #141d27\r\n        box-sizing: border-box\r\n        .logo\r\n          display: inline-block\r\n          width: 44px\r\n          height: 44px\r\n          border-radius: 50%\r\n          text-align: center\r\n          background: #2b343c\r\n          cursor: pointer\r\n          &.highlight\r\n            background: #00a0dc\r\n          .icon-shopping_cart\r\n            line-height: 44px\r\n            font-size: 24px\r\n            color: #80858a\r\n            &.highlight\r\n              color: #fff\r\n        .foodcount\r\n          position: absolute\r\n          top: 0\r\n          right: 0\r\n          width: 24px\r\n          height: 16px\r\n          line-height: 16px\r\n          text-align: center\r\n          border-radius: 8px\r\n          font-size: 9px\r\n          color: #fff\r\n          background: #f01414\r\n      .ball-container\r\n        .ball\r\n          position: fixed\r\n          bottom: 22px\r\n          left: 32px\r\n          z-index: 100\r\n          .inner\r\n            width: 16px\r\n            height: 16px\r\n            border-radius: 50%\r\n            background: rgb(0, 160, 220)\r\n      .price\r\n        display: inline-block\r\n        vertical-align: top\r\n        margin-top: 12px\r\n        padding-right: 12px\r\n        box-sizing: border-box\r\n        border-right: 1px solid rgba(255, 255, 255, 0.1)\r\n        font-size: 16px\r\n        line-height: 24px\r\n        font-weight: 700\r\n        color: rgba(255, 255, 255, 0.4)\r\n        &.highlight\r\n          color: #fff\r\n      .desc\r\n        display: inline-block\r\n        vertical-align: top\r\n        margin: 12px 0 0 12px\r\n        line-height: 24px\r\n        font-size: 10px\r\n        color: rgba(255, 255, 255, 0.4)\r\n    .content-right\r\n      flex: 0 0 105px\r\n      box-sizing: border-box\r\n      width: 105px\r\n      text-align: center\r\n      background: #2b333b\r\n      .pay\r\n        height: 48px\r\n        line-height: 48px\r\n        font-size: 12px\r\n        color: rgba(255, 255, 255, 0.4)\r\n        font-weight: 700\r\n      .topay\r\n        height: 48px\r\n        line-height: 48px\r\n        font-size: 12px\r\n        color: #fff\r\n        background: #00b43c\r\n        cursor: pointer\r\n    .shoplist\r\n      position: absolute\r\n      top: 0\r\n      left: 0\r\n      transform: translate3d(0, -100%, 0)\r\n      width: 100%\r\n      background: #fff\r\n      color: #fff\r\n      z-index: -9\r\n      &.fold-enter-active, &.fold-leave-active\r\n        transition: all 0.3s linear\r\n      &.fold-enter, &.fold-leave-to\r\n        transform: translate3d(0, 0, 0)\r\n      .list-header\r\n        padding: 0 18px\r\n        height: 40px\r\n        line-height: 40px\r\n        background: #f3f5f7\r\n        border-bottom: 1px solid rgba(7, 17, 27, 0.1)\r\n        overflow: hidden\r\n        .shopcart-title\r\n          float: left\r\n          font-size: 14px\r\n          color: rgb(7, 17, 27)\r\n        .empty\r\n          float: right\r\n          font-size: 12px\r\n          color: rgb(0, 160, 220)\r\n          cursor: pointer\r\n      .shopcart-content\r\n        max-height: 215px\r\n        overflow: hidden\r\n        .content-list\r\n          padding: 0 18px\r\n          .content-item\r\n            height: 48px\r\n            line-height: 48px\r\n            border-1px(rgba(7, 17, 27, 0.1))\r\n            .food-name\r\n              font-size: 14px\r\n              font-weight: 500\r\n              color: rgb(7, 17, 27)\r\n            .food-price\r\n              float: right\r\n              margin-right: 6px\r\n              font-size: 14px\r\n              font-weight: 700\r\n              color: rgb(240, 20, 20)\r\n            .select\r\n              float: right\r\n              margin-top: 12px\r\n    .list-mask\r\n      position: fixed\r\n      top: 0\r\n      left: 0\r\n      width: 100%\r\n      height: 100%\r\n      background: rgba(7, 17, 27, 0.6)\r\n      backdrop-filter: blur(10px)\r\n      z-index: -10\r\n      &.mask-enter-active, &.mask-leave-active\r\n        transition: all 0.5s linear\r\n      &.mask-enter, &.mask-leave-to\r\n        opacity: 0\r\n</style>\r\n\r\n"]}]}