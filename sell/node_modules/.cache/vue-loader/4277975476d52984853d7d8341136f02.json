{"remainingRequest":"D:\\vue-cli-demo\\sell\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue-cli-demo\\sell\\src\\components\\ratinglist\\ratinglist.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue-cli-demo\\sell\\src\\components\\ratinglist\\ratinglist.vue","mtime":1555077113397},{"path":"D:\\vue-cli-demo\\sell\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-cli-demo\\sell\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vue-cli-demo\\sell\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-cli-demo\\sell\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport Bus from '../Bus/Bus.js'\r\n\r\nexport default {\r\n  props: {\r\n    food: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      ratingList: [],\r\n      tempCheckedList: [],\r\n      checked: false\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    food: function () {\r\n      //存放某种类型的评论\r\n      this.tempCheckedList = this.food.ratings\r\n      this.ratingList = this.food.ratings\r\n    }\r\n  },\r\n\r\n  mounted: function () {\r\n    //切换路由后，data中的数据会初始化\r\n    if (this.food.ratings) {\r\n      this.tempCheckedList = this.food.ratings\r\n      this.ratingList = this.food.ratings\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    //显示所有评论\r\n    showAll: function () {\r\n      this.ratingList = this.food.ratings\r\n      this.tempCheckedList = this.ratingList\r\n      this._showContent()\r\n      //通过中央事件总线传递数据给父组件\r\n      Bus.$emit('changeratingtype', this.ratingList)\r\n    },\r\n    //显示推荐评论\r\n    showRecommend: function () {\r\n      this.ratingList = this.food.ratings.filter(rating => rating.rateType === 0)\r\n      this.tempCheckedList = this.ratingList\r\n      this._showContent()\r\n      //通过中央事件总线传递数据给父组件\r\n      Bus.$emit('changeratingtype', this.ratingList)\r\n    },\r\n    //显示反对评论\r\n    showDisgusting: function () {\r\n      this.ratingList = this.food.ratings.filter(rating => rating.rateType === 1)\r\n      this.tempCheckedList = this.ratingList\r\n      this._showContent()\r\n      //通过中央事件总线传递数据给父组件\r\n      Bus.$emit('changeratingtype', this.ratingList)\r\n    },\r\n    //内部方法，判断是否应该只显示有内容评论\r\n    _showContent: function () {\r\n      if (this.checked) {\r\n        this.ratingList = this.ratingList.filter(rating => !!rating.text === true)\r\n      }\r\n      else {\r\n        return\r\n      }\r\n    },\r\n    //显示有内容的评论\r\n    showContent: function () {\r\n      this.checked = !this.checked\r\n      if (this.checked) {\r\n        this.ratingList = this.ratingList.filter(rating => !!rating.text === true)\r\n      }\r\n      else {\r\n        //如果取消内容勾选，则显示当前类型的所有评论\r\n        this.ratingList = this.tempCheckedList\r\n      }\r\n      //通过中央事件总线传递数据给父组件\r\n      Bus.$emit('changeratingtype', this.ratingList)\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    recommend: function () {\r\n      const length = this.food.ratings.length\r\n      let recommendNumber = 0\r\n      for (let i = 0; i < length; i++) {\r\n        const rating = this.food.ratings[i]\r\n        if (rating.rateType === 0) {\r\n          recommendNumber++\r\n        }\r\n      }\r\n      return recommendNumber\r\n    },\r\n    disgusting: function () {\r\n      const length = this.food.ratings.length\r\n      let disgustingNumber = 0\r\n      for (let i = 0; i < length; i++) {\r\n        const rating = this.food.ratings[i]\r\n        if (rating.rateType === 1) {\r\n          disgustingNumber++\r\n        }\r\n      }\r\n      return disgustingNumber\r\n    }\r\n  },\r\n\r\n  components: {\r\n    // eslint-disable-next-line\r\n    Bus\r\n  }\r\n}\r\n",{"version":3,"sources":["ratinglist.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"ratinglist.vue","sourceRoot":"src/components/ratinglist","sourcesContent":["<template>\r\n  <div class=\"ratinglist\">\r\n    <div class=\"border\"></div>\r\n    <div class=\"rating-wrapper\">\r\n      <div class=\"food-ratings border-1px\">\r\n        <h1 class=\"ratings-title\">商品评价</h1>\r\n        <div v-if=\"food.ratings\" class=\"rating-sort\">\r\n          <div class=\"common all\" v-on:click=\"showAll\">\r\n            <span class=\"text\">全部</span>\r\n            <span class=\"number\">{{food.ratings.length}}</span>\r\n          </div>\r\n          <div class=\"common recommend\" v-on:click=\"showRecommend\">\r\n            <span class=\"text\">推荐</span>\r\n            <span class=\"number\">{{recommend}}</span>\r\n          </div>\r\n          <div class=\"common disgusting\" v-on:click=\"showDisgusting\">\r\n            <span class=\"text\">吐槽</span>\r\n            <span class=\"number\">{{disgusting}}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"ratings-select\">\r\n        <div class=\"ratings-select-content\">\r\n          <span\r\n            class=\"check-icon\"\r\n            v-bind:class=\"{ checked: checked === true }\"\r\n            v-on:click=\"showContent\"\r\n          >\r\n            <i class=\"icon-check_circle\"></i>\r\n          </span>\r\n          <span class=\"check-text\" v-bind:class=\"{ checked: checked === true }\">只看有内容的评价</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Bus from '../Bus/Bus.js'\r\n\r\nexport default {\r\n  props: {\r\n    food: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      ratingList: [],\r\n      tempCheckedList: [],\r\n      checked: false\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    food: function () {\r\n      //存放某种类型的评论\r\n      this.tempCheckedList = this.food.ratings\r\n      this.ratingList = this.food.ratings\r\n    }\r\n  },\r\n\r\n  mounted: function () {\r\n    //切换路由后，data中的数据会初始化\r\n    if (this.food.ratings) {\r\n      this.tempCheckedList = this.food.ratings\r\n      this.ratingList = this.food.ratings\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    //显示所有评论\r\n    showAll: function () {\r\n      this.ratingList = this.food.ratings\r\n      this.tempCheckedList = this.ratingList\r\n      this._showContent()\r\n      //通过中央事件总线传递数据给父组件\r\n      Bus.$emit('changeratingtype', this.ratingList)\r\n    },\r\n    //显示推荐评论\r\n    showRecommend: function () {\r\n      this.ratingList = this.food.ratings.filter(rating => rating.rateType === 0)\r\n      this.tempCheckedList = this.ratingList\r\n      this._showContent()\r\n      //通过中央事件总线传递数据给父组件\r\n      Bus.$emit('changeratingtype', this.ratingList)\r\n    },\r\n    //显示反对评论\r\n    showDisgusting: function () {\r\n      this.ratingList = this.food.ratings.filter(rating => rating.rateType === 1)\r\n      this.tempCheckedList = this.ratingList\r\n      this._showContent()\r\n      //通过中央事件总线传递数据给父组件\r\n      Bus.$emit('changeratingtype', this.ratingList)\r\n    },\r\n    //内部方法，判断是否应该只显示有内容评论\r\n    _showContent: function () {\r\n      if (this.checked) {\r\n        this.ratingList = this.ratingList.filter(rating => !!rating.text === true)\r\n      }\r\n      else {\r\n        return\r\n      }\r\n    },\r\n    //显示有内容的评论\r\n    showContent: function () {\r\n      this.checked = !this.checked\r\n      if (this.checked) {\r\n        this.ratingList = this.ratingList.filter(rating => !!rating.text === true)\r\n      }\r\n      else {\r\n        //如果取消内容勾选，则显示当前类型的所有评论\r\n        this.ratingList = this.tempCheckedList\r\n      }\r\n      //通过中央事件总线传递数据给父组件\r\n      Bus.$emit('changeratingtype', this.ratingList)\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    recommend: function () {\r\n      const length = this.food.ratings.length\r\n      let recommendNumber = 0\r\n      for (let i = 0; i < length; i++) {\r\n        const rating = this.food.ratings[i]\r\n        if (rating.rateType === 0) {\r\n          recommendNumber++\r\n        }\r\n      }\r\n      return recommendNumber\r\n    },\r\n    disgusting: function () {\r\n      const length = this.food.ratings.length\r\n      let disgustingNumber = 0\r\n      for (let i = 0; i < length; i++) {\r\n        const rating = this.food.ratings[i]\r\n        if (rating.rateType === 1) {\r\n          disgustingNumber++\r\n        }\r\n      }\r\n      return disgustingNumber\r\n    }\r\n  },\r\n\r\n  components: {\r\n    // eslint-disable-next-line\r\n    Bus\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '../../common/stylus/mixin.styl'\r\n\r\n  .ratinglist\r\n    .border\r\n      height: 16px\r\n      border-top: 1px solid rgba(7, 17, 27, 0.1)\r\n      border-bottom: 1px solid rgba(7, 17, 27, 0.1)\r\n      background: #f3f5f7\r\n    .rating-wrapper\r\n      .food-ratings\r\n        margin: 0 18px\r\n        padding: 18px 0\r\n        border-1px(rgba(7, 17, 27, 0.1))\r\n        .ratings-title\r\n          margin-bottom: 6px\r\n          font-size: 15px\r\n          font-weight: 500\r\n          color: rgb(7, 17, 27)\r\n        .rating-sort\r\n          &>.common\r\n            display: inline-block\r\n            margin-right: 8px\r\n            padding: 8px 12px\r\n            text-align: center\r\n            box-sizing: border-box\r\n            height: 32px\r\n            line-height: 16px\r\n            font-size: 0\r\n            border-radius: 1px\r\n            cursor: pointer\r\n            &>.text\r\n              margin-right: 3px\r\n              font-size: 12px\r\n              font-weight: 500\r\n            &>.number\r\n              font-size: 8px\r\n              font-weight: 500\r\n          .all\r\n            background: rgb(0, 160, 220)\r\n            color: #fff\r\n          .recommend\r\n            background: rgba(0, 160, 220, 0.2)\r\n            color: rgb(77, 85, 93)\r\n          .disgusting\r\n            background: rgba(77, 85, 93, 0.2)\r\n            color: rgb(77, 85, 93)\r\n      .ratings-select\r\n        padding: 12px 18px\r\n        border-bottom: 1px solid rgba(7, 17, 27, 0.1)\r\n        .ratings-select-content\r\n          font-size: 0\r\n          .check-icon\r\n            margin-right: 4px\r\n            vertical-align: top\r\n            font-size: 24px\r\n            color: rgb(147, 153, 159)\r\n            cursor: pointer\r\n            &.checked\r\n              color: rgb(0, 160, 220)\r\n          .check-text\r\n            display: inline-block\r\n            vertical-align: top\r\n            line-height: 24px\r\n            font-size: 12px\r\n            color: rgb(147, 153, 159)\r\n            &.checked\r\n              font-weight: 500\r\n              color: #000\r\n</style>"]}]}