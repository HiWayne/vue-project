{"remainingRequest":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\thread-loader\\dist\\cjs.js!c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\babel-loader\\lib\\index.js!c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\person_data\\demo\\Vue-demo\\sell\\src\\components\\goods\\goods.vue?vue&type=script&lang=js&","dependencies":[{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\src\\components\\goods\\goods.vue","mtime":1555420895241},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Scroll from 'better-scroll';\nimport cartcontrol from '../cartcontrol/cartcontrol.vue';\nimport food from '../food/food.vue';\nvar ERROK = 0;\nexport default {\n  props: {\n    seller: {\n      type: Object,\n      required: true\n    },\n    //已选择的食品\n    selectfoods: {\n      type: Array,\n      required: true\n    },\n    //shopcart组件实例\n    shopcartComponent: {\n      type: Object,\n      required: true\n    }\n  },\n  data: function data() {\n    return {\n      //异步从服务器get数据\n      goods: [],\n      //不同的type映射到不同的class\n      classMap: ['decrease', 'discount', 'special', 'invoice', 'guarantee'],\n      //存放右侧栏目高度\n      heightArray: [],\n      //当前滚动高度\n      currentHeight: 0,\n      //进入食品详情页时该食品的数据\n      selectedFood: {},\n      //食品详情页是否显示\n      show: false\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    this.$http.get('/api/goods').then(function (res) {\n      if (res.data.errno === ERROK) {\n        _this.goods = res.data.data;\n      } else new Error();\n    }).catch(function (error) {\n      console.log(error);\n    });\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    this.scrollMenu = new Scroll(this.$refs.menu, {\n      click: true\n    });\n    this.scrollFood = new Scroll(this.$refs.food, {\n      click: true,\n      probeType: 3\n    });\n    this.scrollFood.on('scroll', function (pos) {\n      _this2.currentHeight = Math.abs(pos.y);\n    });\n  },\n  computed: {\n    leftIndex: function leftIndex() {\n      for (var i = 0; i < this.heightArray.length; i++) {\n        if (this.heightArray[i + 1] && this.currentHeight >= this.heightArray[i] && this.currentHeight < this.heightArray[i + 1]) {\n          return i;\n        }\n      }\n\n      return 0;\n    }\n  },\n  watch: {\n    goods: function goods() {\n      var _this3 = this;\n\n      this.$nextTick(function () {\n        var foodList = _this3.$refs.fooditem,\n            addHeight = 0;\n\n        _this3.heightArray.push(0);\n\n        for (var i = 0; i < foodList.length; i++) {\n          addHeight += foodList[i].clientHeight;\n\n          _this3.heightArray.push(addHeight);\n        }\n      });\n    }\n  },\n  methods: {\n    scrollto: function scrollto(index, event) {\n      if (!event._constructed) {\n        return;\n      } else {\n        var foods = this.$refs.fooditem;\n        var target = foods[index];\n        this.scrollFood.scrollToElement(target, 400);\n      }\n    },\n    drop: function drop(el) {\n      this.shopcartComponent.dropball(el);\n    },\n    selectFood: function selectFood(food) {\n      if (food) {\n        this.selectedFood = food;\n      }\n\n      this.show = !this.show;\n    }\n  },\n  components: {\n    cartcontrol: cartcontrol,\n    food: food\n  }\n};",null]}