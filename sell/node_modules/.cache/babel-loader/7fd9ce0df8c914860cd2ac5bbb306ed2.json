{"remainingRequest":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\thread-loader\\dist\\cjs.js!c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\babel-loader\\lib\\index.js!c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\person_data\\demo\\Vue-demo\\sell\\src\\components\\shopcart\\shopcart.vue?vue&type=script&lang=js&","dependencies":[{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\src\\components\\shopcart\\shopcart.vue","mtime":1556111989414},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport cartcontrol from '../cartcontrol/cartcontrol.vue';\nimport Scroll from 'better-scroll';\nexport default {\n  props: {\n    seller: {\n      type: Object,\n      required: true\n    },\n    selectfoods: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  data: function data() {\n    return {\n      showshoplist: false,\n      balls: [{\n        show: false\n      }, {\n        show: false\n      }, {\n        show: false\n      }, {\n        show: false\n      }, {\n        show: false\n      }, {\n        show: false\n      }, {\n        show: false\n      }, {\n        show: false\n      }],\n      dropballs: []\n    };\n  },\n  mounted: function mounted() {\n    new Scroll(this.$refs.shopcartContent, {\n      click: true\n    });\n  },\n  computed: {\n    totalprice: function totalprice() {\n      var price = 0;\n      this.selectfoods.forEach(function (food) {\n        price += food.price * food.count;\n      });\n      return price;\n    },\n    foodcount: function foodcount() {\n      var count = 0;\n      this.selectfoods.forEach(function (food) {\n        count += food.count;\n      });\n      return count;\n    }\n  },\n  methods: {\n    showlist: function showlist() {\n      if (!this.selectfoods.length) {\n        return;\n      }\n\n      this.showshoplist = !this.showshoplist;\n    },\n    dropball: function dropball(el) {\n      var _this = this;\n\n      //currentTarget,绑定事件的节点; target, 触发事件的节点。currentTarget会在冒泡结束后reset为null，所以先保存起来\n      var currentTarget = el.currentTarget; //优化性能体验，异步调用下落动画\n\n      this.$nextTick(function () {\n        var length = _this.balls.length;\n\n        for (var i = 0; i < length; i++) {\n          var ball = _this.balls[i];\n\n          if (!ball.show) {\n            ball.show = true;\n            ball.el = currentTarget;\n\n            _this.dropballs.push(ball);\n\n            return;\n          }\n        }\n      });\n    },\n    beforeEnter: function beforeEnter(el) {\n      var length = this.dropballs.length;\n      length--;\n      var dropball = this.dropballs[length];\n      var rect = dropball.el.getBoundingClientRect();\n      var height = window.innerHeight;\n      var x = rect.left - 32;\n      var y = -(height - rect.top - 38);\n      el.style.display = \"\";\n      el.style.transform = \"translate3d(\".concat(x, \"px, 0, 0)\");\n      var inner = el.children[0];\n      inner.style.transform = \"translate3d(0, \".concat(y, \"px, 0)\");\n      el.style.transition = \"all 0.4s linear\";\n      inner.style.transition = \"all 0.4s cubic-bezier(.64,-0.38,.83,.67)\";\n    },\n    //当只用 JavaScript 过渡的时候，在 enter 和 leave 中必须使用 done 进行回调。否则，它们将被同步调用，过渡会立即完成。\n    enter: function enter(el) {\n      /* eslint-disable no-unused-vars */\n      var rf = el.offsetHeight;\n      var inner = el.children[0];\n      el.style.transform = \"translate3d(0, 0, 0)\";\n      inner.style.transform = \"translate3d(0, 0, 0)\";\n    },\n    afterEnter: function afterEnter(el) {\n      var ball = this.dropballs.shift();\n      ball.show = false;\n      el.style.display = \"none\";\n    },\n    emptylist: function emptylist() {\n      var length = this.selectfoods.length;\n\n      for (var i = length - 1; i >= 0; i--) {\n        this.selectfoods[i].count = 0;\n        this.selectfoods.splice(i, 1);\n      }\n    },\n    pay: function pay() {\n      if (this.totalprice < this.seller.minPrice) {\n        return;\n      }\n\n      alert(\"\\u652F\\u4ED8\".concat(this.totalprice, \"\\u5143\"));\n      this.emptylist();\n    }\n  },\n  watch: {\n    selectfoods: function selectfoods(newfoods) {\n      if (!newfoods.length) {\n        this.showshoplist = false;\n      }\n    }\n  },\n  components: {\n    cartcontrol: cartcontrol\n  }\n};",null]}