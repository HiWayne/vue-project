{"remainingRequest":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\babel-loader\\lib\\index.js!c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\person_data\\demo\\Vue-demo\\sell\\src\\components\\ratinglist\\ratinglist.vue?vue&type=script&lang=js&","dependencies":[{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\src\\components\\ratinglist\\ratinglist.vue","mtime":1555680847788},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Bus from '../Bus/Bus.js';\nvar ALL = \"all\";\nvar RECOMMEND = \"recommend\";\nvar DISGUSTING = \"disgusting\";\nexport default {\n  props: {\n    food: {\n      type: Object,\n      required: true\n    },\n    text: {\n      type: Object,\n      default: function _default() {\n        return {\n          recommend: \"推荐\",\n          disgusting: \"吐槽\"\n        };\n      }\n    }\n  },\n  data: function data() {\n    return {\n      ratingList: [],\n      tempCheckedList: [],\n      checked: false,\n      ratingType: ALL\n    };\n  },\n  watch: {\n    food: function food() {\n      //存放某种类型的评论\n      this.tempCheckedList = this.food.ratings;\n      this.ratingList = this.food.ratings;\n    }\n  },\n  mounted: function mounted() {\n    //切换路由后，data中的数据会初始化\n    if (this.food.ratings) {\n      this.tempCheckedList = this.food.ratings;\n      this.ratingList = this.food.ratings;\n    }\n  },\n  methods: {\n    //显示所有评论\n    showAll: function showAll() {\n      this.ratingType = ALL;\n      this.ratingList = this.food.ratings;\n      this.tempCheckedList = this.ratingList;\n\n      this._showContent(); //通过中央事件总线传递数据给父组件\n\n\n      Bus.$emit('changeratingtype', this.ratingList);\n    },\n    //显示推荐评论\n    showRecommend: function showRecommend() {\n      this.ratingType = RECOMMEND;\n      this.ratingList = this.food.ratings.filter(function (rating) {\n        return rating.rateType === 0;\n      });\n      this.tempCheckedList = this.ratingList;\n\n      this._showContent(); //通过中央事件总线传递数据给父组件\n\n\n      Bus.$emit('changeratingtype', this.ratingList);\n    },\n    //显示反对评论\n    showDisgusting: function showDisgusting() {\n      this.ratingType = DISGUSTING;\n      this.ratingList = this.food.ratings.filter(function (rating) {\n        return rating.rateType === 1;\n      });\n      this.tempCheckedList = this.ratingList;\n\n      this._showContent(); //通过中央事件总线传递数据给父组件\n\n\n      Bus.$emit('changeratingtype', this.ratingList);\n    },\n    //内部方法，判断是否应该只显示有内容评论\n    _showContent: function _showContent() {\n      if (this.checked) {\n        this.ratingList = this.ratingList.filter(function (rating) {\n          return !!rating.text === true;\n        });\n      } else {\n        return;\n      }\n    },\n    //显示有内容的评论\n    showContent: function showContent() {\n      this.checked = !this.checked;\n\n      if (this.checked) {\n        this.ratingList = this.ratingList.filter(function (rating) {\n          return !!rating.text === true;\n        });\n      } else {\n        //如果取消内容勾选，则显示当前类型的所有评论\n        this.ratingList = this.tempCheckedList;\n      } //通过中央事件总线传递数据给父组件\n\n\n      Bus.$emit('changeratingtype', this.ratingList);\n    }\n  },\n  computed: {\n    recommend: function recommend() {\n      var length = this.food.ratings.length;\n      var recommendNumber = 0;\n\n      for (var i = 0; i < length; i++) {\n        var rating = this.food.ratings[i];\n\n        if (rating.rateType === 0) {\n          recommendNumber++;\n        }\n      }\n\n      return recommendNumber;\n    },\n    disgusting: function disgusting() {\n      var length = this.food.ratings.length;\n      var disgustingNumber = 0;\n\n      for (var i = 0; i < length; i++) {\n        var rating = this.food.ratings[i];\n\n        if (rating.rateType === 1) {\n          disgustingNumber++;\n        }\n      }\n\n      return disgustingNumber;\n    }\n  },\n  components: {\n    // eslint-disable-next-line\n    Bus: Bus\n  }\n};",{"version":3,"sources":["ratinglist.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"ratinglist\">\r\n    <div class=\"border\"></div>\r\n    <div class=\"rating-wrapper\">\r\n      <div class=\"food-ratings border-1px\">\r\n        <h1 class=\"ratings-title\">商品评价</h1>\r\n        <div v-if=\"food.ratings\" class=\"rating-sort\">\r\n          <div class=\"common all\" v-bind:class=\"{ active: ratingType === 'all' }\" v-on:click=\"showAll\">\r\n            <span class=\"text\">全部</span>\r\n            <span class=\"number\">{{food.ratings.length}}</span>\r\n          </div>\r\n          <div class=\"common recommend\" v-bind:class=\"{ active: ratingType === 'recommend' }\" v-on:click=\"showRecommend\">\r\n            <span class=\"text\">{{text.recommend}}</span>\r\n            <span class=\"number\">{{recommend}}</span>\r\n          </div>\r\n          <div class=\"common disgusting\" v-bind:class=\"{ active: ratingType === 'disgusting' }\" v-on:click=\"showDisgusting\">\r\n            <span class=\"text\">{{text.disgusting}}</span>\r\n            <span class=\"number\">{{disgusting}}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"ratings-select\">\r\n        <div class=\"ratings-select-content\">\r\n          <span\r\n            class=\"check-icon\"\r\n            v-bind:class=\"{ checked: checked === true }\"\r\n            v-on:click=\"showContent\"\r\n          >\r\n            <i class=\"icon-check_circle\"></i>\r\n          </span>\r\n          <span class=\"check-text\" v-bind:class=\"{ checked: checked === true }\">只看有内容的评价</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Bus from '../Bus/Bus.js'\r\n\r\nconst ALL = \"all\"\r\nconst RECOMMEND = \"recommend\"\r\nconst DISGUSTING = \"disgusting\"\r\n\r\nexport default {\r\n  props: {\r\n    food: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    text: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          recommend: \"推荐\",\r\n          disgusting: \"吐槽\"\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      ratingList: [],\r\n      tempCheckedList: [],\r\n      checked: false,\r\n      ratingType: ALL\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    food: function () {\r\n      //存放某种类型的评论\r\n      this.tempCheckedList = this.food.ratings\r\n      this.ratingList = this.food.ratings\r\n    }\r\n  },\r\n\r\n  mounted: function () {\r\n    //切换路由后，data中的数据会初始化\r\n    if (this.food.ratings) {\r\n      this.tempCheckedList = this.food.ratings\r\n      this.ratingList = this.food.ratings\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    //显示所有评论\r\n    showAll: function () {\r\n      this.ratingType = ALL\r\n      this.ratingList = this.food.ratings\r\n      this.tempCheckedList = this.ratingList\r\n      this._showContent()\r\n      //通过中央事件总线传递数据给父组件\r\n      Bus.$emit('changeratingtype', this.ratingList)\r\n    },\r\n    //显示推荐评论\r\n    showRecommend: function () {\r\n      this.ratingType = RECOMMEND\r\n      this.ratingList = this.food.ratings.filter(rating => rating.rateType === 0)\r\n      this.tempCheckedList = this.ratingList\r\n      this._showContent()\r\n      //通过中央事件总线传递数据给父组件\r\n      Bus.$emit('changeratingtype', this.ratingList)\r\n    },\r\n    //显示反对评论\r\n    showDisgusting: function () {\r\n      this.ratingType = DISGUSTING\r\n      this.ratingList = this.food.ratings.filter(rating => rating.rateType === 1)\r\n      this.tempCheckedList = this.ratingList\r\n      this._showContent()\r\n      //通过中央事件总线传递数据给父组件\r\n      Bus.$emit('changeratingtype', this.ratingList)\r\n    },\r\n    //内部方法，判断是否应该只显示有内容评论\r\n    _showContent: function () {\r\n      if (this.checked) {\r\n        this.ratingList = this.ratingList.filter(rating => !!rating.text === true)\r\n      }\r\n      else {\r\n        return\r\n      }\r\n    },\r\n    //显示有内容的评论\r\n    showContent: function () {\r\n      this.checked = !this.checked\r\n      if (this.checked) {\r\n        this.ratingList = this.ratingList.filter(rating => !!rating.text === true)\r\n      }\r\n      else {\r\n        //如果取消内容勾选，则显示当前类型的所有评论\r\n        this.ratingList = this.tempCheckedList\r\n      }\r\n      //通过中央事件总线传递数据给父组件\r\n      Bus.$emit('changeratingtype', this.ratingList)\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    recommend: function () {\r\n      const length = this.food.ratings.length\r\n      let recommendNumber = 0\r\n      for (let i = 0; i < length; i++) {\r\n        const rating = this.food.ratings[i]\r\n        if (rating.rateType === 0) {\r\n          recommendNumber++\r\n        }\r\n      }\r\n      return recommendNumber\r\n    },\r\n    disgusting: function () {\r\n      const length = this.food.ratings.length\r\n      let disgustingNumber = 0\r\n      for (let i = 0; i < length; i++) {\r\n        const rating = this.food.ratings[i]\r\n        if (rating.rateType === 1) {\r\n          disgustingNumber++\r\n        }\r\n      }\r\n      return disgustingNumber\r\n    }\r\n  },\r\n\r\n  components: {\r\n    // eslint-disable-next-line\r\n    Bus\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '../../common/stylus/mixin.styl'\r\n\r\n  .ratinglist\r\n    .border\r\n      height: 16px\r\n      border-top: 1px solid rgba(7, 17, 27, 0.1)\r\n      border-bottom: 1px solid rgba(7, 17, 27, 0.1)\r\n      background: #f3f5f7\r\n    .rating-wrapper\r\n      .food-ratings\r\n        margin: 0 18px\r\n        padding: 18px 0\r\n        border-1px(rgba(7, 17, 27, 0.1))\r\n        .ratings-title\r\n          margin-bottom: 6px\r\n          font-size: 15px\r\n          font-weight: 500\r\n          color: rgb(7, 17, 27)\r\n        .rating-sort\r\n          &>.common\r\n            display: inline-block\r\n            margin-right: 8px\r\n            padding: 8px 12px\r\n            text-align: center\r\n            box-sizing: border-box\r\n            height: 32px\r\n            line-height: 16px\r\n            font-size: 0\r\n            border-radius: 1px\r\n            color: rgb(77, 85, 93)\r\n            cursor: pointer\r\n            &>.text\r\n              margin-right: 3px\r\n              font-size: 12px\r\n              font-weight: 500\r\n            &>.number\r\n              font-size: 8px\r\n              font-weight: 500\r\n          .active\r\n            color: #fff\r\n          .all\r\n            background: rgba(0, 160, 220, 0.2)\r\n            &.active\r\n              background: rgb(0, 160, 220)\r\n          .recommend\r\n            background: rgba(0, 160, 220, 0.2)\r\n            &.active\r\n              background: rgb(0, 160, 220)\r\n          .disgusting\r\n            background: rgba(77, 85, 93, 0.2)\r\n            &.active\r\n              background: rgb(77, 85, 93)\r\n      .ratings-select\r\n        padding: 12px 18px\r\n        border-bottom: 1px solid rgba(7, 17, 27, 0.1)\r\n        .ratings-select-content\r\n          font-size: 0\r\n          .check-icon\r\n            margin-right: 4px\r\n            vertical-align: top\r\n            font-size: 24px\r\n            color: rgb(147, 153, 159)\r\n            cursor: pointer\r\n            &.checked\r\n              color: #00c850\r\n          .check-text\r\n            display: inline-block\r\n            vertical-align: top\r\n            line-height: 24px\r\n            font-size: 12px\r\n            color: rgb(147, 153, 159)\r\n            &.checked\r\n              font-weight: 500\r\n              color: #000\r\n</style>"],"sourceRoot":"src/components/ratinglist"}]}