{"remainingRequest":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\thread-loader\\dist\\cjs.js!c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\babel-loader\\lib\\index.js!c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\person_data\\demo\\Vue-demo\\sell\\src\\components\\ratinglist\\ratinglist.vue?vue&type=script&lang=js&","dependencies":[{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\src\\components\\ratinglist\\ratinglist.vue","mtime":1555680847788},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\person_data\\demo\\Vue-demo\\sell\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Bus from '../Bus/Bus.js';\nvar ALL = \"all\";\nvar RECOMMEND = \"recommend\";\nvar DISGUSTING = \"disgusting\";\nexport default {\n  props: {\n    food: {\n      type: Object,\n      required: true\n    },\n    text: {\n      type: Object,\n      default: function _default() {\n        return {\n          recommend: \"推荐\",\n          disgusting: \"吐槽\"\n        };\n      }\n    }\n  },\n  data: function data() {\n    return {\n      ratingList: [],\n      tempCheckedList: [],\n      checked: false,\n      ratingType: ALL\n    };\n  },\n  watch: {\n    food: function food() {\n      //存放某种类型的评论\n      this.tempCheckedList = this.food.ratings;\n      this.ratingList = this.food.ratings;\n    }\n  },\n  mounted: function mounted() {\n    //切换路由后，data中的数据会初始化\n    if (this.food.ratings) {\n      this.tempCheckedList = this.food.ratings;\n      this.ratingList = this.food.ratings;\n    }\n  },\n  methods: {\n    //显示所有评论\n    showAll: function showAll() {\n      this.ratingType = ALL;\n      this.ratingList = this.food.ratings;\n      this.tempCheckedList = this.ratingList;\n\n      this._showContent(); //通过中央事件总线传递数据给父组件\n\n\n      Bus.$emit('changeratingtype', this.ratingList);\n    },\n    //显示推荐评论\n    showRecommend: function showRecommend() {\n      this.ratingType = RECOMMEND;\n      this.ratingList = this.food.ratings.filter(function (rating) {\n        return rating.rateType === 0;\n      });\n      this.tempCheckedList = this.ratingList;\n\n      this._showContent(); //通过中央事件总线传递数据给父组件\n\n\n      Bus.$emit('changeratingtype', this.ratingList);\n    },\n    //显示反对评论\n    showDisgusting: function showDisgusting() {\n      this.ratingType = DISGUSTING;\n      this.ratingList = this.food.ratings.filter(function (rating) {\n        return rating.rateType === 1;\n      });\n      this.tempCheckedList = this.ratingList;\n\n      this._showContent(); //通过中央事件总线传递数据给父组件\n\n\n      Bus.$emit('changeratingtype', this.ratingList);\n    },\n    //内部方法，判断是否应该只显示有内容评论\n    _showContent: function _showContent() {\n      if (this.checked) {\n        this.ratingList = this.ratingList.filter(function (rating) {\n          return !!rating.text === true;\n        });\n      } else {\n        return;\n      }\n    },\n    //显示有内容的评论\n    showContent: function showContent() {\n      this.checked = !this.checked;\n\n      if (this.checked) {\n        this.ratingList = this.ratingList.filter(function (rating) {\n          return !!rating.text === true;\n        });\n      } else {\n        //如果取消内容勾选，则显示当前类型的所有评论\n        this.ratingList = this.tempCheckedList;\n      } //通过中央事件总线传递数据给父组件\n\n\n      Bus.$emit('changeratingtype', this.ratingList);\n    }\n  },\n  computed: {\n    recommend: function recommend() {\n      var length = this.food.ratings.length;\n      var recommendNumber = 0;\n\n      for (var i = 0; i < length; i++) {\n        var rating = this.food.ratings[i];\n\n        if (rating.rateType === 0) {\n          recommendNumber++;\n        }\n      }\n\n      return recommendNumber;\n    },\n    disgusting: function disgusting() {\n      var length = this.food.ratings.length;\n      var disgustingNumber = 0;\n\n      for (var i = 0; i < length; i++) {\n        var rating = this.food.ratings[i];\n\n        if (rating.rateType === 1) {\n          disgustingNumber++;\n        }\n      }\n\n      return disgustingNumber;\n    }\n  },\n  components: {\n    // eslint-disable-next-line\n    Bus: Bus\n  }\n};",null]}